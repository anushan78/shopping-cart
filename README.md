## :warning: Please read these instructions carefully and entirely first

- Clone this repository to your local machine.
- Use your IDE of choice to complete the assignment.
- When you have completed the assignment, you need to push your code to this repository and [mark the assignment as completed by clicking here](https://app.snapcode.review/submission_links/a49eb873-8ebf-4b25-8277-d798760da9e5).
- Once you mark it as completed, your access to this repository will be revoked. Please make sure that you have completed the assignment and pushed all code from your local machine to this repository before you click the link.
- There is no time limit for this task - however, for guidance, it is expected to typically take around 1-2 hours.

# Begin the task

Write some code that provides the following basic shopping cart capabilities:

1. Add a product to the cart

   1. Specifying the product name and quantity
   2. Retrieve the product price by issuing a request to the [Price API](#price-api) specified below
   3. Cart state (totals, etc.) must be available

2. Calculate the state:
   1. Cart subtotal (sum of price for all items)
   2. Tax payable (charged at 12.5% on the subtotal)
   3. Total payable (subtotal + tax)
   4. Totals should be rounded up where required (to two decimal places)

## Price API

The price API is an existing API that returns the price details for a product, identified by it's name. The shopping cart should integrate with the price API to retrieve product prices.

### Price API Service Details

Base URL: `https://equalexperts.github.io/`

View Product: `GET /backend-take-home-test-data/{product}.json`

List of available products

- `cheerios`
- `cornflakes`
- `frosties`
- `shreddies`
- `weetabix`

## Example

The below is a sample with the correct values you can use to confirm your calculations

### Inputs

- Add 1 × cornflakes @ 2.52 each
- Add another 1 x cornflakes @2.52 each
- Add 1 × weetabix @ 9.98 each

### Results

- Cart contains 2 x cornflakes
- Cart contains 1 x weetabix
- Subtotal = 15.02
- Tax = 1.88
- Total = 16.90

## Tips on what we’re looking for

We value simplicity as an architectural virtue and as a development practice. Solutions should reflect the difficulty of the assigned task, and shouldn’t be overly complex. We prefer simple, well tested solutions over clever solutions.

### DO

- ✅ Include unit tests.
- ✅ Test both any client and logic.
- ✅ Update the README.md with any relevant information, assumptions, and/or tradeoffs you would like to highlight.

### DO NOT

- ❌ Submit any form of app, such as web APIs, browser, desktop, or command-line applications.
- ❌ Add unnecessary layers of abstraction.
- ❌ Add unnecessary patterns/ architectural features that aren’t called for e.g. persistent storage.

### AI Tool Usage

While we encourage the use of AI tools as part of the learning process but to ensure transparency, please provide the following information regarding the use of AI tools in this submission:

1.  **Specific Use Cases:** Describe for what purposes tool was used (e.g., code generation, debugging assistance, query generation etc.).
2.  **Percentage of Code Generated by AI:** Provide an estimate of the percentage of the submitted code that was generated by AI.
3.  **How AI-Generated Code Was Reviewed:** Explain how you reviewed and verified the AI-generated code to ensure its correctness and quality.

Please note, during the technical interview, which will build upon this exercise, we'll focus on your coding abilities and problem-solving skills without the use of AI tools. This will allow us to see your direct approach and thought process.

## Project Structure

src/
├── config/
│ └── config.ts # Holds API base URL and tax rate
├── models/
│ ├── Product.ts # Product interface
│ └── CartItem.ts # Cart item model
├── services/
│ ├── IPriceService.ts # Interface for price retrieval
│ ├── PriceService.ts # Fetches live prices from Price API
│ └── ShoppingCartService.ts # Core business logic
tests/
├── PriceService.test.ts # Tests real HTTP calls
└── ShoppingCartService.test.ts # Tests calculations & integration

## Configuration

All configurable settings are located in src/config/config.ts:

export const config = {
apiBaseUrl: process.env.API_BASE_URL || "https://equalexperts.github.io",
getPath: "backend-take-home-test-data",
taxRate: parseFloat(process.env.TAX_RATE || "0.125"),
};

This allows easy modification of the API endpoint or tax rate without changing core logic.

## Example Usage

import { PriceService } from "./services/PriceService";
import { ShoppingCartService } from "./services/ShoppingCartService";

(async () => {
const priceService = new PriceService();
const cartService = new ShoppingCartService(priceService);

await cartService.addProduct("cornflakes", 1);
await cartService.addProduct("cornflakes", 1);
await cartService.addProduct("weetabix", 1);

console.log("Subtotal:", cartService.getSubtotal());
console.log("Tax:", cartService.getTax());
console.log("Total:", cartService.getTotal());
})();

## Expected Output

Subtotal: 15.02
Tax: 1.88
Total: 16.90

## Testing

Run all tests

npm test

This runs both unit and integration tests using Jest with Typescript support (ts-jest).

Example:

it("should calculate subtotal, tax and total with real prices from API", async () => {
shoppingCartService.clearCart();
await shoppingCartService.addProduct("cornflakes", 1);
await shoppingCartService.addProduct("cornflakes", 1);
await shoppingCartService.addProduct("weetabix", 1);

expect(shoppingCartService.getSubtotal()).toEqual(15.02);
expect(shoppingCartService.getTax()).toEqual(1.88);
expect(shoppingCartService.getTotal()).toEqual(16.9);
});

## Design & Architecture

- Single Responsibility Principle (SRP)

  - PriceService → Handles API communication
  - ShoppingCartService → Handles cart logic and calculations

- Dependency Injection

  - ShoppingCartService accepts IPriceService as a dependency for testability.

- Config-Driven Design

  - Tax rate and API base URL stored externally in config.ts.

- No Persistent Storage
  - All cart data is stored in memory for simplicity (as per assignment instructions).

## Assumptions & Trade-offs

- The Price API (https://equalexperts.github.io/backend-take-home-test-data/) is assumed to be reliable and publicly accessible.
- Prices are fetched per product; no caching layer is implemented to keep the solution simple and transparent.
- All calculations use standard floating-point arithmetic, rounded to two decimal places.
- Integration tests perform real HTTP calls to verify API interaction.
- Error handling includes:
  - Invalid or unavailable products
  - Unexpected response payloads

## Getting Started

Clone and install

git clone <repository-url>
cd shopping-cart
npm install

## Run Tests

npm test
